<?php

module_load_include('inc', basename(__DIR__), basename(__DIR__) . '.classes');
module_load_include('inc', basename(__DIR__), basename(__DIR__) . '.callbacks');

/**
 * Implements hook_menu().
 */
function nytech_api_menu() {
  $items = [];

  $item = new NyTechMenu(__DIR__);
  $item->path('api/v1/test/%');
  $item->page_callback('api_test');
  $item->page_arguments([3]);
  $item->access_callback(true);
  $item->json_output();
  $items = $item->item($items);

  $item = new NyTechMenu(__DIR__);
  $item->path('api/v1/account');
  $item->page_callback('api_account');
  $item->access_callback(true);
  $item->json_output();
  $items = $item->item($items);

  $item = new NyTechMenu(__DIR__);
  $item->path('api/v1/notifications');
  $item->page_callback('api_notifications');
  $item->access_callback(true);
  $item->json_output();
  $items = $item->item($items);

  $item = new NyTechMenu(__DIR__);
  $item->path('api/v1/o/%/jobs');
  $item->page_callback('api_jobs');
  $item->page_arguments([3]);
  $item->access_callback(true);
  $item->json_output();
  $items = $item->item($items);

  $item = new NyTechMenu(__DIR__);
  $item->path('api/v1/o/%/jobs/%/images/%/view');
  $item->page_callback('api_jobs_image_view');
  $item->page_arguments([3,5,7]);
  $item->access_callback(true);
  $item->json_output();
  $items = $item->item($items);

  return $items;
}

